<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Caching" /><meta name="author" content="Tai Le" /><meta property="og:locale" content="en_US" /><meta name="description" content="With an anxious feeling at this moment, I have decided to write a blog article to relieve that feeling. Again, it is all about summarizing things that I have recently worked on, this time is some caching techniques in Python." /><meta property="og:description" content="With an anxious feeling at this moment, I have decided to write a blog article to relieve that feeling. Again, it is all about summarizing things that I have recently worked on, this time is some caching techniques in Python." /><link rel="canonical" href="https://tailtq.github.io/posts/caching/" /><meta property="og:url" content="https://tailtq.github.io/posts/caching/" /><meta property="og:site_name" content="Tailtq" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-05-01T00:00:00+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Caching" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Tai Le" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Tai Le"},"dateModified":"2022-08-07T08:51:41+07:00","datePublished":"2022-05-01T00:00:00+07:00","description":"With an anxious feeling at this moment, I have decided to write a blog article to relieve that feeling. Again, it is all about summarizing things that I have recently worked on, this time is some caching techniques in Python.","headline":"Caching","mainEntityOfPage":{"@type":"WebPage","@id":"https://tailtq.github.io/posts/caching/"},"url":"https://tailtq.github.io/posts/caching/"}</script><title>Caching | Tailtq</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Tailtq"><meta name="application-name" content="Tailtq"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-ZB7VQFD7XK"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-ZB7VQFD7XK'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-right"><div id="avatar"> <a href="/" alt="avatar"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Tailtq</a></div><div class="site-subtitle">A software developer who enjoys learning, reading, and building things</div></div><hr><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <span>Home</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <span>About me</span> </a><li class="nav-item"> <a href="/interesting-blogs/" class="nav-link"> <span>Interesting blogs</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <span>Archives</span> </a><li class="nav-item"> <a href="https://github.com/tailtq" class="nav-link" target="_blank"> <span>GitHub</span> </a><li class="nav-item}"> <a href="https://www.linkedin.com/in/tai-le-05124a187/" class="nav-link" target="_blank"> <span>Linkedin</span> </a></ul></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Caching</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Caching</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Tai Le </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, May 1, 2022, 12:00 AM +0700" prep="on" > May 1, 2022 <i class="unloaded">2022-05-01T00:00:00+07:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Aug 7, 2022, 8:51 AM +0700" prefix="Updated " > Aug 7, 2022 <i class="unloaded">2022-08-07T08:51:41+07:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="981 words">5 min</span></div></div><div class="post-content"><p>With an anxious feeling at this moment, I have decided to write a blog article to relieve that feeling. Again, it is all about summarizing things that I have recently worked on, this time is some caching techniques in Python.</p><h2 id="1-general-concept">1. General concept</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2022-05-01/caching.png" alt="Caching" /></p><p>Cache is the concept of storing computed data in a space (RAM, files, …) where it can be accessed at a greater speed. This technique is a savior of many systems, databases, and services having huge traffic daily.</p><ul><li>Increase reading time<li>Reduce the workload on servers, databases<li>Predictable performance</ul><p>In one example, it takes 5 seconds for your system to perform action A. In the subsequent requests coming with the same input of action A to produce the same result, should we run A again? The answer is NO, instead of performing that heavy action again, we should store the computed result of the first request somewhere and use that result for the incoming requests having the same input.</p><p>It is like when you note down some useful information in the interesting book you are reading. Next time when you want to find that information, finding it in the notebook is greatly faster than skimming the whole book again.</p><h2 id="2-when-should-we-cache">2. When should we cache?</h2><p>As a software engineer, we should analyze whether caching that specific resource is appropriate or not, it depends on how frequently that resource is written and read (we should be dynamic, that characteristic will create a great engineer).</p><ul><li>If a resource is written more frequently than read, the cons will outweigh the pros because the cache will be modified frequently. In that case, not caching or caching the small portion of that resource are more effective.<li>If the task is not intensive and there is no huge traffic, we should not cache to save human resources for other features<li>If the operation consumes much time and resources to compute or it is heavily read, caching should be done here</ul><h2 id="3-what-type-of-cache-should-we-use">3. What type of cache should we use?</h2><p>According to Ironistic (2014), there are 4 major types of caching:</p><ul><li>Web Caching (Browser/Proxy/Gateway)<li>Memory Caching<li>Application/Output Caching (HTML, CSS, JS)<li>Distributed Caching</ul><p>In the scope of this article, we will only focus on the second and last types. After that, I will share some of my experiences with them, which one would be the most beneficial to choose in each case.</p><h4 id="a-memory-caching">a. Memory Caching</h4><p>A type of cache that saves data in RAM allocated for its own process. This is by far the fastest caching technique because RAM accessing is really fast, but it has some limitations:</p><ul><li>Cached data cannot be shared across processes because each process has its own memory space<li>Cannot fully utilize the potential of caching because the output can be computed many times in case multiple processes are running<li>If one process stops, its cached data is completely gone<li>Hard to scale up because it requires stronger servers (RAM often comes with CPU) which has a greater cost</ul><p><strong>Use case:</strong> Memory caching should be used in standalone applications like a single server, a mobile application, etc.</p><p><strong>Python libraries:</strong> cachetools, …</p><h4 id="b-file-caching">b. File Caching</h4><p>As I mentioned above, <em>memory caching</em> cannot share the memory between processes. Even though <em>file caching</em> is slower due to I/O operations to files stored in a hard disk, it solves all problems that memory caching has.</p><p>File caching also has its disadvantages:</p><ul><li>I/O operations to hard disks are much slower than RAM (The statistic is retrieved from “Access time” (n.d.)<ul><li>HDD: 5-10 milliseconds<li>SSD: 25-100 microseconds<li>RAM: 10 nanoseconds</ul><li>Cached data cannot be shared between a cluster of nodes when we have multiple nodes running</ul><p><strong>Use case:</strong> If you have only one server and multiple processes running in parallel, this is an effective solution.</p><p><strong>Python libraries:</strong> Diskcache, (you can code your own, …)</p><h4 id="c-distributed-caching">c. Distributed Caching</h4><p>Distributed caching puts all the caches in RAM but in a different server. This is a preferable approach for <strong>big systems</strong> because it completely eliminates all disadvantages of other types. Scaling is not a costly problem anymore, it is possible to rent servers having a high volume of RAM with a small CPU computation capacity.</p><p>Applications communicate with cache servers using TCP protocol; if all of the instances are put in the same network, the communication speed is not a problem.</p><p><strong>Use case:</strong> Apply for big systems having multiple nodes running at the same time.</p><p><strong>Technologies:</strong> Redis, Memcached</p><h2 id="4-eviction-policies">4. Eviction Policies</h2><p>There are several eviction policies that are available in caching libraries or technologies, below are the policies that I know. Note that these will be applied when a cache achieves its maximum allocated volume.</p><ul><li><strong>Least Recently Stored (LRS - Queue):</strong> Work like a queue. Whenever a new item is added, the oldest item will be eliminated.<li><strong>Least Recently Used (LRU):</strong> Each item will maintain its most recent hitting time. Whenever a new item is added, the item having the oldest hitting time will be eliminated.<li><strong>Least Frequently Used (LFU):</strong> Each item will maintain its counter. Whenever a new item is added, the least used item will be eliminated.<li><strong>None:</strong> No policy applies, the items will be eliminated only when it expires.</ul><h2 id="5-caching-patterns">5. Caching Patterns</h2><ul><li><strong>Lazy caching:</strong> Only requested items will be cached. If one item is used, firstly check it from the cache. If it is not available, use it. If not, the DB query will operate, cache the item, and use it.<li><strong>Write-through:</strong> The cache is updated in real-time when the database is updated.</ul><p>There are several more strategies written <a href="https://medium.datadriveninvestor.com/all-things-caching-use-cases-benefits-strategies-choosing-a-caching-technology-exploring-fa6c1f2e93aa">here</a>, they are <strong>Write Behind Caching</strong> and <strong>Refresh Ahead Caching</strong>. I will leave them to you guys to figure out.</p><h2 id="6-references">6. References</h2><ul><li>“Caching Best Practices” (n. d.). AmazonWebServices. <a href="https://aws.amazon.com/vi/caching/best-practices/">https://aws.amazon.com/vi/caching/best-practices/</a><li>Ironistic (2014). <em>Four Major Caching Types and Their Differences</em>. Ironistic. <a href="https://www.ironistic.com/insights/four-major-caching-types-and-their-differences/">https://www.ironistic.com/insights/four-major-caching-types-and-their-differences/</a><li>Nath. K. (2018). <em>All things caching- use cases, benefits, strategies, choosing a caching technology, exploring some popular products</em>. Medium. <a href="https://medium.datadriveninvestor.com/all-things-caching-use-cases-benefits-strategies-choosing-a-caching-technology-exploring-fa6c1f2e93aa">https://medium.datadriveninvestor.com/all-things-caching-use-cases-benefits-strategies-choosing-a-caching-technology-exploring-fa6c1f2e93aa</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/python/" class="post-tag no-text-decoration" >Python</a> <a href="/tags/back-end/" class="post-tag no-text-decoration" >Back-end</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Caching - Tailtq&url=https://tailtq.github.io/posts/caching/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Caching - Tailtq&u=https://tailtq.github.io/posts/caching/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Caching - Tailtq&url=https://tailtq.github.io/posts/caching/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/asynchronous-programming/">Asynchronous Programming</a><li><a href="/posts/streamlit-a-fast-way-to-build-web-applications/">Streamlit - A Fast Way to Build Web Applications</a><li><a href="/posts/modify-facebook-duckling/">Modify Facebook's Duckling</a><li><a href="/posts/tensorflow-with-amd-ubuntu/">Use Tensorflow with AMD GPU on Ubuntu</a><li><a href="/posts/how-i-reduced-rasa-testing-time-by-60-80/">How I reduced RASA testing time by 60-80%</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/back-end/">Back-end</a> <a class="post-tag" href="/tags/database/">Database</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/front-end/">Front-end</a> <a class="post-tag" href="/tags/haskell/">Haskell</a> <a class="post-tag" href="/tags/math/">Math</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/tensorflow/">Tensorflow</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/multithreading-vs-multiprocessing/"><div class="card-body"> <span class="timeago small" > Apr 2, 2022 <i class="unloaded">2022-04-02T00:00:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Multi-threading vs Multi-processing</h3><div class="text-muted small"><p> At some points, we encounter some problems that make our applications tremendously slow. It could be the amount of computation is large, or accessing multiple resources at the time, or too many tas...</p></div></div></a></div><div class="card"> <a href="/posts/how-i-reduced-rasa-testing-time-by-60-80/"><div class="card-body"> <span class="timeago small" > Aug 6, 2022 <i class="unloaded">2022-08-06T00:00:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How I reduced RASA testing time by 60-80%</h3><div class="text-muted small"><p> It is quite a long time since I wrote my latest post, and now I come back stronger with a topic that contains both Back-end and AI. It is my journey to customize the Natural Language Understanding ...</p></div></div></a></div><div class="card"> <a href="/posts/bridge-pattern/"><div class="card-body"> <span class="timeago small" > Sep 14, 2022 <i class="unloaded">2022-09-14T00:00:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Bridge - A pattern that every developer should know</h3><div class="text-muted small"><p> In the environments where I have worked, I personally think my colleagues’ mindsets and approaches to coding aren’t wise; they just follow their instinct without considering the refactoring factor....</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/multithreading-vs-multiprocessing/" class="btn btn-outline-primary" prompt="Older"><p>Multi-threading vs Multi-processing</p></a> <a href="/posts/web-scraping-with-python/" class="btn btn-outline-primary" prompt="Newer"><p>Web Scraping with Python</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">Tai Le</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/back-end/">Back end</a> <a class="post-tag" href="/tags/database/">Database</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/front-end/">Front end</a> <a class="post-tag" href="/tags/haskell/">Haskell</a> <a class="post-tag" href="/tags/math/">Math</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/tensorflow/">Tensorflow</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://tailtq.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
